<!DOCTYPE html>
<html>
<head>
<title>Jewels of Babylon: Routine at 64770</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="64717.html">64717</a>
</td>
<td class="up">Up: <a href="../maps/all.html#64770">Map</a></td>
<td class="next">
Next: <a href="64877.html">64877</a>
</td>
</tr>
</table>
<div class="description">64770: Action: Row</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
</div>
</td>
</tr>
<tr>
<td class="asm-label">Action_Row</td>
<td class="address-2"><span id="64770"></span>64770</td>
<td class="instruction">CALL <a href="50359.html">Parser_ValidateAnyDirectObject</a></td>
<td class="comment-1" rowspan="1">Call <a href="50359.html">Parser_ValidateAnyDirectObject</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64773"></span>64773</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if the direct object is malformed.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64774"></span>64774</td>
<td class="instruction">CP 2</td>
<td class="comment-1" rowspan="2">Jump to <a href="61556.html">Response_PleaseRephraseThat_Duplicate</a> if <span class="register">A</span> is greater than 2.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64776"></span>64776</td>
<td class="instruction">JP NC,<a href="61556.html">Response_PleaseRephraseThat_Duplicate</a></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64779"></span>
<div class="comments">
<div class="paragraph">
Is the player in a room where they're able to row something?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64779"></span>64779</td>
<td class="instruction">LD A,(48331)</td>
<td class="comment-1" rowspan="1">Load <span class="register">A</span> with *<a href="48331.html">CurrentRoom</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64782"></span>64782</td>
<td class="instruction">LD HL,64798</td>
<td class="comment-1" rowspan="1">Set <span class="register">HL</span> to point to <a href="64770.html#64798">Table_RoomsRowingBoat</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64785"></span>64785</td>
<td class="instruction">LD BC,3</td>
<td class="comment-1" rowspan="1">Set a counter in <span class="register">BC</span> of 0003 which is the number of rooms in the table.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64788"></span>64788</td>
<td class="instruction">CPIR</td>
<td class="comment-1" rowspan="1">Search for the current room in the "rowing boat rooms" table.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64790"></span>64790</td>
<td class="instruction">JR Z,<a href="64770.html#64801">Row_OpenSea</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="64770.html#64801">Row_OpenSea</a> if there's something to row in this room.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64792"></span>
<div class="comments">
<div class="paragraph">
Print "You're not in the boat.".
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64792"></span>64792</td>
<td class="instruction">LD HL,56375</td>
<td class="comment-1" rowspan="1"><span class="register">HL</span>=<a href="56375.html">Messaging_YoureNotInTheBoat</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64795"></span>64795</td>
<td class="instruction">JP <a href="61498.html">PrintStringAndNewline_Alias</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="61498.html">PrintStringAndNewline_Alias</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64798"></span>
<div class="comments">
<div class="paragraph">
A table containing any room ID in which you're in the rowing boat.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Table_RoomsRowingBoat</td>
<td class="address-1"><span id="64798"></span>64798</td>
<td class="instruction">DEFB 107</td>
<td class="comment-1" rowspan="1">Room 107: 

<a href="52070.html">In A Rowing Boat</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64799"></span>64799</td>
<td class="instruction">DEFB 4</td>
<td class="comment-1" rowspan="1">Room 4: 

<a href="52070.html">In A Rowing Boat</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64800"></span>64800</td>
<td class="instruction">DEFB 2</td>
<td class="comment-1" rowspan="1">Room 2: 

<a href="51974.html">The Open Sea</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64801"></span>
<div class="comments">
<div class="paragraph">
The player is in a room containing a rowing boat, but which one?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Row_OpenSea</td>
<td class="address-2"><span id="64801"></span>64801</td>
<td class="instruction">CP 2</td>
<td class="comment-1" rowspan="2">Jump to <a href="64770.html#64809">Row_North</a> if the room match was not room 2: 

<a href="51974.html">The Open Sea</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64803"></span>64803</td>
<td class="instruction">JR NZ,<a href="64770.html#64809">Row_North</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64805"></span>64805</td>
<td class="instruction">CALL <a href="61268.html">ChangeRoom</a></td>
<td class="comment-1" rowspan="1">Call <a href="61268.html">ChangeRoom</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64808"></span>64808</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64809"></span>
<div class="comments">
<div class="paragraph">
The player is in either room 107 or 4 but which direction were they attempting to travel in?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Row_North</td>
<td class="address-2"><span id="64809"></span>64809</td>
<td class="instruction">LD HL,60140</td>
<td class="comment-1" rowspan="2">Call <a href="50047.html">MatchPhraseTokens</a> with <a href="59850.html#60140">PhraseTokens_North</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64812"></span>64812</td>
<td class="instruction">CALL <a href="50047.html">MatchPhraseTokens</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64815"></span>64815</td>
<td class="instruction">JR NZ,<a href="64770.html#64831">Row_South</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="64770.html#64831">Row_South</a> if the token isn't for rowing north.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64817"></span>64817</td>
<td class="instruction">LD A,(48331)</td>
<td class="comment-1" rowspan="3">Jump to <a href="61561.html">Response_YouveDoneThatAlready</a> if *<a href="48331.html">CurrentRoom</a> is not room 4: "

<a href="52070.html">In A Rowing Boat</a>".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64820"></span>64820</td>
<td class="instruction">CP 4</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64822"></span>64822</td>
<td class="instruction">JP NZ,<a href="61561.html">Response_YouveDoneThatAlready</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64825"></span>64825</td>
<td class="instruction">LD A,107</td>
<td class="comment-1" rowspan="2">Call <a href="61268.html">ChangeRoom</a> to room 107: 

<a href="52070.html">In A Rowing Boat</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64827"></span>64827</td>
<td class="instruction">CALL <a href="61268.html">ChangeRoom</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64830"></span>64830</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64831"></span>
<div class="comments">
<div class="paragraph">
Was the player trying to row south?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Row_South</td>
<td class="address-2"><span id="64831"></span>64831</td>
<td class="instruction">LD HL,60149</td>
<td class="comment-1" rowspan="2">Call <a href="50047.html">MatchPhraseTokens</a> with <a href="59850.html#60149">PhraseTokens_South</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64834"></span>64834</td>
<td class="instruction">CALL <a href="50047.html">MatchPhraseTokens</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64837"></span>64837</td>
<td class="instruction">JR NZ,<a href="64770.html#64852">Row_East</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="64770.html#64852">Row_East</a> if the token isn't for rowing south.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64839"></span>64839</td>
<td class="instruction">LD A,(48331)</td>
<td class="comment-1" rowspan="3">Jump to <a href="64770.html#64871">Row_Lost</a> if *<a href="48331.html">CurrentRoom</a> is not room 107: "

<a href="52070.html">In A Rowing Boat</a>".</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64842"></span>64842</td>
<td class="instruction">CP 107</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64844"></span>64844</td>
<td class="instruction">JR NZ,<a href="64770.html#64871">Row_Lost</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64846"></span>64846</td>
<td class="instruction">LD A,4</td>
<td class="comment-1" rowspan="2">Call <a href="61268.html">ChangeRoom</a> to room 4: 

<a href="52070.html">In A Rowing Boat</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64848"></span>64848</td>
<td class="instruction">CALL <a href="61268.html">ChangeRoom</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64851"></span>64851</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64852"></span>
<div class="comments">
<div class="paragraph">
Was the player trying to row east?
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Row_East</td>
<td class="address-2"><span id="64852"></span>64852</td>
<td class="instruction">LD HL,60158</td>
<td class="comment-1" rowspan="2">Call <a href="50047.html">MatchPhraseTokens</a> with <a href="59850.html#60158">PhraseTokens_East</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64855"></span>64855</td>
<td class="instruction">CALL <a href="50047.html">MatchPhraseTokens</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64858"></span>64858</td>
<td class="instruction">JR Z,<a href="64770.html#64871">Row_Lost</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="64770.html#64871">Row_Lost</a> if the token is for rowing east.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64860"></span>
<div class="comments">
<div class="paragraph">
West it is then.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64860"></span>64860</td>
<td class="instruction">LD HL,60167</td>
<td class="comment-1" rowspan="2">Call <a href="50047.html">MatchPhraseTokens</a> with <a href="59850.html#60167">PhraseTokens_West</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64863"></span>64863</td>
<td class="instruction">CALL <a href="50047.html">MatchPhraseTokens</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64866"></span>64866</td>
<td class="instruction">JR Z,<a href="64770.html#64871">Row_Lost</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="64770.html#64871">Row_Lost</a> if the token is for rowing west.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64868"></span>
<div class="comments">
<div class="paragraph">
Nothing else is valid.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64868"></span>64868</td>
<td class="instruction">JP <a href="61556.html">Response_PleaseRephraseThat_Duplicate</a></td>
<td class="comment-1" rowspan="1">Jump to <a href="61556.html">Response_PleaseRephraseThat_Duplicate</a>.</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="64871"></span>
<div class="comments">
<div class="paragraph">
Player is now lost...
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label">Row_Lost</td>
<td class="address-2"><span id="64871"></span>64871</td>
<td class="instruction">LD A,2</td>
<td class="comment-1" rowspan="2">Call <a href="61268.html">ChangeRoom</a> to room 2: 

<a href="51974.html">The Open Sea</a>.</td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64873"></span>64873</td>
<td class="instruction">CALL <a href="61268.html">ChangeRoom</a></td>
</tr>
<tr>
<td class="asm-label"></td>
<td class="address-1"><span id="64876"></span>64876</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Return.</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="64717.html">64717</a>
</td>
<td class="up">Up: <a href="../maps/all.html#64770">Map</a></td>
<td class="next">
Next: <a href="64877.html">64877</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1985 Interceptor Software UK &copy; 2025 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.6.</div>
<div class="repository">Link to <a rel="noopener nofollow" href="https://github.com/pobtastic/adventure-games/tree/main/sources/jewelsofbabylon/">Source code</a>.</div>
<div><a href="../../asm/FD02.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>